Writing Functions
================
Molly Martorella
10/24/2019

``` r
x <- rnorm(n = 30, mean = 4, sd = 2.3)
x_again <- rnorm(n = 30, mean = 6, sd = .3)
y <- rnorm(n = 30, mean = 24, sd = 2.3)

(x - mean(x))/sd(x)
```

    ##  [1] -1.32411642 -1.59421313  0.01605692  1.99217548 -0.30256758
    ##  [6]  1.69327882 -1.62305574 -1.25828668 -0.70336158  0.09384247
    ## [11] -0.05376187  0.70008007 -0.10262458  1.13072823  0.65248733
    ## [16]  0.89944797 -0.60013209  0.15333603 -0.09025559  0.41382772
    ## [21]  1.34232609  0.58413135  1.44634427 -0.55584101  1.02188363
    ## [26] -0.48888512 -0.97130437 -1.09225796 -0.15974595 -1.21953674

``` r
(x_again - mean(x_again))/sd(x_again)
```

    ##  [1] -1.803797724  1.822279559 -0.644802691 -0.606984380  0.005196068
    ##  [6] -0.209348304  0.034283183  1.523496747  0.789511956 -0.191134725
    ## [11] -0.850339388 -1.146514890  0.663272220 -1.019523864 -0.307748748
    ## [16] -1.453026047  1.195568181 -0.488486638  1.451022373 -0.748557357
    ## [21] -0.859496607  0.527188103  0.638749621  0.663550859  1.629643440
    ## [26] -1.764478397  0.199433155  0.547081957 -0.300012455  0.703974791

``` r
# want to automate this.
```

Function:

``` r
#called z score function, it is an object, the argument is something called x.

z_score <- function(x){
  
  (x - mean(x))/(sd(x))
  
}
```

Try out
    function:

``` r
z_score(x = x_again)
```

    ##  [1] -1.803797724  1.822279559 -0.644802691 -0.606984380  0.005196068
    ##  [6] -0.209348304  0.034283183  1.523496747  0.789511956 -0.191134725
    ## [11] -0.850339388 -1.146514890  0.663272220 -1.019523864 -0.307748748
    ## [16] -1.453026047  1.195568181 -0.488486638  1.451022373 -0.748557357
    ## [21] -0.859496607  0.527188103  0.638749621  0.663550859  1.629643440
    ## [26] -1.764478397  0.199433155  0.547081957 -0.300012455  0.703974791

``` r
z_score(x = y)
```

    ##  [1]  0.491041252  0.283811095  0.549426788 -0.725677131 -0.087675524
    ##  [6]  0.707965793 -2.197153286  1.716758439  0.279102468  1.143124585
    ## [11] -0.595491224 -1.323915003  0.245446712  0.366743107  0.851136616
    ## [16] -0.658722132 -1.195935656 -0.560402916  0.323496612  0.170787882
    ## [21]  0.245715877 -1.698237075  0.406993503  0.559215066  1.749060765
    ## [26]  0.001101342 -0.170028701 -0.168247701  1.384841532 -2.094283088

``` r
z_score(x = 3)
```

    ## [1] NA

``` r
z_score(x = "my name is Molly")
```

    ## Error in x - mean(x): non-numeric argument to binary operator

``` r
z_score(x = c(TRUE, TRUE, FALSE, TRUE))
```

    ## [1]  0.5  0.5 -1.5  0.5

``` r
z_score(x = iris)
```

    ## Error in is.data.frame(x): (list) object cannot be coerced to type 'double'

``` r
#function as written requires as object you can compute the mean and sd.
```

update function:

``` r
z_score <- function(x){
  
  if(!is.numeric(x)){
    stop("x should be numeric")
  } else if (length(x) < 3) {
    stop("x should be longer than 3")
  }
  
  (x - mean(x))/(sd(x))
  
}
```

# Multiple outputs:

``` r
mean_and_sd <- function(x){
  
  if(!is.numeric(x)){
    stop("x should be numeric")
  } else if (length(x) < 3) {
    stop("x should be longer than 3")
  }
  
  tibble(
    mean_input = mean(x),
    sd = sd(x))

}
```

test:

``` r
mean_and_sd(x = y)
```

    ## # A tibble: 1 x 2
    ##   mean_input    sd
    ##        <dbl> <dbl>
    ## 1       24.5  1.86

``` r
mean_and_sd <- function(x){
  
  if(!is.numeric(x)){
    stop("x should be numeric")
  } else if (length(x) < 3) {
    stop("x should be longer than 3")
  }
  
  list(
    mean_input = mean(x),
    sd = sd(x),
    z_score = (x - mean(x))/sd(x))

}
```

test:

``` r
mean_and_sd(x = y)
```

    ## $mean_input
    ## [1] 24.52963
    ## 
    ## $sd
    ## [1] 1.864047
    ## 
    ## $z_score
    ##  [1]  0.491041252  0.283811095  0.549426788 -0.725677131 -0.087675524
    ##  [6]  0.707965793 -2.197153286  1.716758439  0.279102468  1.143124585
    ## [11] -0.595491224 -1.323915003  0.245446712  0.366743107  0.851136616
    ## [16] -0.658722132 -1.195935656 -0.560402916  0.323496612  0.170787882
    ## [21]  0.245715877 -1.698237075  0.406993503  0.559215066  1.749060765
    ## [26]  0.001101342 -0.170028701 -0.168247701  1.384841532 -2.094283088

# Multiple inputs:

``` r
sim_data = tibble(
  x = rnorm(30, mean = 1, sd = 1),
  y = 2 + 3 * x + rnorm(30, 0, 1)
)

ls_fit = lm(y ~ x, data = sim_data)
  
# use coef to extract linear model coefs (slope and intercept, [1] is intercept, [2] is the slope).

beta0_hat = coef(ls_fit)[1]
beta1_hat = coef(ls_fit)[2]
```

``` r
sim_regression = function(n) {
  
  sim_data = tibble(
    x = rnorm(n, mean = 1, sd = 1),
    y = 2 + 3 * x + rnorm(n, 0, 1)
  )
  
  ls_fit = lm(y ~ x, data = sim_data)
  
  tibble(
    beta0_hat = coef(ls_fit)[1],
    beta1_hat = coef(ls_fit)[2]
  )
}

sim_regression(n = 30)
```

    ## # A tibble: 1 x 2
    ##   beta0_hat beta1_hat
    ##       <dbl>     <dbl>
    ## 1      2.35      2.95

``` r
#repeatedly running the function gives different estimates every time. Increasing sample size will get closer to slope of 3 and int of 2.

sim_regression(n = 3000)
```

    ## # A tibble: 1 x 2
    ##   beta0_hat beta1_hat
    ##       <dbl>     <dbl>
    ## 1      2.05      2.96

``` r
sim_regression = function(n, beta0, beta1) {
  
  sim_data = tibble(
    x = rnorm(n, mean = 1, sd = 1),
    y = beta0 + beta1 * x + rnorm(n, 0, 1)
  )
  
  ls_fit = lm(y ~ x, data = sim_data)
  
  tibble(
    beta0_hat = coef(ls_fit)[1],
    beta1_hat = coef(ls_fit)[2]
  )
}

sim_regression(n = 3000, beta0 = 17, beta1 = -3)
```

    ## # A tibble: 1 x 2
    ##   beta0_hat beta1_hat
    ##       <dbl>     <dbl>
    ## 1      17.0     -3.00

``` r
sim_regression(n = 30, beta0 = 17, beta1 = -3)
```

    ## # A tibble: 1 x 2
    ##   beta0_hat beta1_hat
    ##       <dbl>     <dbl>
    ## 1      16.6     -2.90

``` r
# can set defaults unless user changes them:

sim_regression = function(n, beta0 = 2, beta1 = 3) {
  
  sim_data = tibble(
    x = rnorm(n, mean = 1, sd = 1),
    y = beta0 + beta1 * x + rnorm(n, 0, 1)
  )
  
  ls_fit = lm(y ~ x, data = sim_data)
  
  tibble(
    beta0_hat = coef(ls_fit)[1],
    beta1_hat = coef(ls_fit)[2]
  )
}

sim_regression(3000)
```

    ## # A tibble: 1 x 2
    ##   beta0_hat beta1_hat
    ##       <dbl>     <dbl>
    ## 1      2.04      2.98
